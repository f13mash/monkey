CC      = $CC
CFLAGS  = $CFLAGS
LDFLAGS = $LDFLAGS
DEFS    = $DEFS
DIRS    = 
INCDIR  = ../../../../src/include -I../../
OBJECTS = duda_package.o sqlite.o
SOURCES = duda_package.c sqlite.c

all: ../sqlite.dpkg

../sqlite.dpkg: $(OBJECTS)
	if [ -e sqlite_main/Makefile ] ; then DIRS = $(DIRS) sqlite_main ; fi
	@(for d in $(DIRS); do $(MAKE) -C $$d ; done)
	$(CC) $(CFLAGS) $(LDFLAGS) $(DEFS) -shared -Wl -o $@ $^ -lc

.c.o: $(SOURCES)
	$(CC) $(CFLAGS) $(DEFS) -I$(INCDIR) -fPIC -c $<

clean:
	rm -rf *~ *.o
